? og_views_managelink_groupcontext.patch
Index: modules/og_views/includes/og_views_handler_field_og_managelink.inc
===================================================================
RCS file: /cvs/drupal-contrib/contributions/modules/og/modules/og_views/includes/Attic/og_views_handler_field_og_managelink.inc,v
retrieving revision 1.3
diff -u -p -r1.3 og_views_handler_field_og_managelink.inc
--- modules/og_views/includes/og_views_handler_field_og_managelink.inc	19 Dec 2008 18:51:31 -0000	1.3
+++ modules/og_views/includes/og_views_handler_field_og_managelink.inc	1 Feb 2010 16:13:13 -0000
@@ -22,8 +22,12 @@ class og_views_handler_field_og_manageli
     $uid = $values->{$this->aliases['uid']};
     $is_active = $values->{$this->aliases['is_active']};
     $node = node_load($nid);
+    $group = og_get_group_context();
+    // Check that the queried membership entry nid matches the current group
+    // context -- outside a group context we can get unpredictable results for
+    // the nid in this entry.
     // Only show links to group admins. And don't show next to group manager.
-    if ($uid != $node->uid) {
+    if ($group && ($group->nid === $node->nid) && $uid != $node->uid) {
       if ($is_active) {
         $item = menu_get_item("og/unsubscribe/$nid/$uid");
         if ($item['access']) {
